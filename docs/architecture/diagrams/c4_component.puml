@startuml
!include <C4/C4_Component>

Container_Boundary(framework, "Julee Framework") {
    Component(domain, "Domain", "Models & Protocols", "Entities, Repository Protocols, Service Protocols")
    Component(usecases, "Use Cases", "Business Logic", "CEAP use case implementations")
    Component(workflows, "CEAP Workflows", "Temporal workflows", "ExtractAssemble, Validate workflows")
    Component(repos, "Repository Impls", "Storage", "MinIO, Memory implementations")
    Component(services, "Service Impls", "Integrations", "Knowledge service implementations")
    Component(di, "DI Container", "FastAPI Depends", "Dependency injection and configuration")
}

Container_Boundary(app, "Your Application") {
    Component(appDomain, "Domain Models", "Pydantic", "Your business entities")
    Component(appUseCases, "Use Cases", "Business Logic", "Your application use cases")
    Component(appConfig, "Configuration", "Settings", "Service configuration, DI setup")
    Component(appAPI, "API Container", "FastAPI", "REST API, triggers workflows")
    Component(appWorker, "Worker Container", "Temporal", "Runs workflows, executes use cases")
}

Rel(appDomain, domain, "Extends/Uses")
Rel(appUseCases, usecases, "Extends/Uses")
Rel(appUseCases, domain, "Uses")
Rel(appWorker, workflows, "Runs")
Rel(workflows, appUseCases, "Calls")
Rel(workflows, usecases, "Calls")
Rel(usecases, domain, "Uses")
Rel(usecases, repos, "Via protocols")
Rel(usecases, services, "Via protocols")
Rel(appAPI, appUseCases, "Calls")
Rel(appAPI, workflows, "Triggers (via Temporal)")
Rel(appConfig, di, "Configures")
Rel(di, repos, "Provides")
Rel(di, services, "Provides")
@enduml
