@startuml
!include <C4/C4_Container>

Person(user, "User")

System_Boundary(app, "Julee Application") {
    Container(ui, "Web UI", "React/Vue/etc", "Optional user interface")
    Container(api, "API Server", "FastAPI + Julee", "Application API using Julee")
    Container(worker, "Temporal Worker", "Python + Julee", "Runs Julee CEAP workflows")
}

System_Boundary(infra, "Infrastructure Services") {
    ContainerDb(temporal, "Temporal Server", "Workflow Engine", "Orchestrates CEAP workflows")
    ContainerDb(storage, "Object Storage", "MinIO/S3", "Document and data storage")
    ContainerDb(tempdb, "PostgreSQL", "Database", "Temporal persistence")
}

System_Ext(external, "External Services", "Knowledge, AI, policy services, etc.")

Rel(user, ui, "Uses", "HTTPS")
Rel(ui, api, "Calls", "HTTPS/JSON")
Rel(api, temporal, "Starts workflows", "gRPC")
Rel(worker, temporal, "Polls for work", "gRPC")
Rel(api, storage, "Stores/retrieves", "S3 API")
Rel(worker, storage, "Stores/retrieves", "S3 API")
Rel(worker, external, "Calls services", "HTTPS/API")
Rel(temporal, tempdb, "Persists", "SQL")
@enduml
