{# Repository catalog template - renders repository protocols grouped by bounded context #}
{#
   Receives:
   - artifacts: list[CodeArtifactWithContext] - repos with their BC slugs
   - options: dict - directive options (show-methods, link-to-api)
#}
{% extends "catalog_base.rst.jinja" %}

{% block empty_message %}No repository protocols found in solution.{% endblock %}

{% block item_content %}
{% set repo = item.artifact %}
{% set entity_type = repo.name[:-10] if repo.name.endswith('Repository') else None %}
``{{ repo.name }}``{% if entity_type %} -> {{ entity_type }}{% endif %}

   {{ repo.docstring|first_sentence if repo.docstring else '(no description)' }}
{% if options.get('show-methods') and repo.methods %}
   *Methods:* ``{{ repo.methods|map(attribute='name')|join(', ') }}``
{% endif %}

{% endblock %}
